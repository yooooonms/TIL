# @Converter  

ì»¨ë²„í„°ë¥¼ ì‚¬ìš©í•´ ì—”í‹°í‹°ì˜ ë°ì´í„°ë¥¼ ë³€í™˜í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.  

ìë°”ì˜ `boolean` íƒ€ì…ì€ ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì €ì¥ëœë‹¤.  

ë³´í†µ `0`ê³¼ `1`ë˜ëŠ” `TRUE`ì™€ `FALSE`ë¡œ ì €ì¥ëœë‹¤.  

> H2 ë°ì´í„°ë² ì´ìŠ¤ ê°™ì€ ê²½ìš° TRUEì™€ FALSEë¡œ ì €ì¥ëœë‹¤.

ë°ì´í„°ë² ì´ìŠ¤ `0`ê³¼ `1`ë˜ëŠ” `TRUE`ì™€ `FALSE` ëŒ€ì‹  `Y`ë‚˜ `N`ê°’ì„ ì €ì¥í•˜ê³  ì‹¶ì„ ê²½ìš° ì»¨í„°ë²„ë¥¼ ì‚¬ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  

ì˜ˆë¥¼ ë“¤ì–´ íšŒì›ì˜ í™œì„±í™” ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” `isActive` í•„ë“œê°€ ìˆë‹¤ê³  í•˜ì   

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@Getter
public class Member {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "member_id")
    private Long id;

    @Column(nullable = false)
    private boolean isActive;

    public Member(Boolean isActive) {
        this.isActive = isActive;
    }

}
```

íšŒì› ì—”í‹°í‹°ì˜ `isActive` í•„ë“œë¥¼ `true`ë¡œ ì €ì¥í•˜ë©´ í…Œì´ë¸”ì€ ì•„ë˜ì™€ ê°™ë‹¤.  

```text
+-----------+-----------+
|MEMBER_ID  |IS_ACTIVE  |
+-----------+-----------+
|1          |TRUE       |
+-----------+-----------+
```

`IS_ACTIVE`ì»¬ëŸ¼ì„ `YN`ìœ¼ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” ì»¨ë²„í„° í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.  

## ì»¨ë²„í„° í´ë˜ìŠ¤  

```java
@Converter
public class BooleanToYNConverter implements AttributeConverter<Boolean, String> {

    /**
     * Boolean ê°’ì„ Y ë˜ëŠ” N ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
     *
     * @param attribute boolean ê°’
     * @return String trueì¸ ê²½ìš° Yë¡œ ë³€í™˜í•˜ê³  falseì¸ ê²½ìš° Nìœ¼ë¡œ ë³€í™˜í•œë‹¤.
     */
    @Override
    public String convertToDatabaseColumn(Boolean attribute) {
        return (attribute != null && attribute) ? "Y" : "N";
    }

    /**
     * Y ë˜ëŠ” Nì„ Booleanìœ¼ë¡œ ë³€ê²½í•œë‹¤.
     *
     * @param dbData Y or N
     * @return Boolean Yì¸ ê²½ìš° true, Nì¸ ê²½ìš° falseë¡œ ë³€í™˜í•œë‹¤.
     */
    @Override
    public Boolean convertToEntityAttribute(String dbData) {
        return "Y".equals(dbData);
    }

}
```


ì»¨ë²„í„° í´ë˜ìŠ¤ëŠ” `@Converter` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê³  `AttributeConverter` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.  

```java
public interface AttributeConverter<X,Y> {

    public Y convertToDatabaseColumn (X attribute);

    public X convertToEntityAttribute (Y dbData);

}
```

`AttributeConverter` ì¸í„°í˜ì´ìŠ¤ì—ëŠ” êµ¬í˜„í•´ì•¼í•  ë‘ ê°œì˜ ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.  

ì œë„¤ë¦­ìœ¼ë¡œëŠ” ì—”í‹°í‹° ì»¬ëŸ¼ íƒ€ì…ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ íƒ€ì…ì„ ì£¼ë©´ ëœë‹¤.

#### - Y convertToDatabaseColumn (X attribute)  

ì—”í‹°í‹°ì˜ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ì— ì €ì¥í•  ë°ì´í„°ë¡œ ë³€í™˜í•œë‹¤.  

#### - X convertToEntityAttribute (Y dbData)  

ë°ì´í„°ë² ì´ìŠ¤ì— ì¡°íšŒí•œ ì»¬ëŸ¼ ë°ì´í„°ë¥¼ ì—”í‹°í‹°ì˜ ë°ì´í„°ë¡œ ë³€í™˜í•œë‹¤.  

## ì—”í‹°í‹° ì ìš©  

```java
@Entity
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@Getter
public class Member {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "member_id")
    private Long id;

    @Convert(converter = BooleanToYNConverter.class)
    @Column(nullable = false)
    private boolean isActive;

    public Member(Boolean isActive) {
        this.isActive = isActive;
    }

}
```

ì ìš©í•˜ê³  ì‹¶ì€ í•„ë“œì— `@Convert` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ë©´ ëœë‹¤.  

`converter` ì†ì„±ì˜ ê°’ìœ¼ë¡œ ì»¨ë²„í„° í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ë©´ ëœë‹¤.  

`@Convert` ì–´ë…¸í…Œì´ì…˜ì€ í´ë˜ìŠ¤ ë ˆë²¨ì—ë„ ì§€ì •ì´ ê°€ëŠ¥í•œë° í´ë˜ìŠ¤ ë ˆë²¨ì´ ì§€ì •í•  ê²½ìš° `attributeName` ì†ì„±ì„ ì‚¬ìš©í•´ ì–´ë–¤ í•„ë“œì— ì»¨ë²„í„°ë¥¼ ì ìš©í• ì§€ ëª…ì‹œí•´ì•¼ í•œë‹¤.  

```java
@Entity
@Convert(converter = BooleanToYNConverter.class, attributeName = "isActive")
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@Getter
public class Member {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "member_id")
    private Long id;
    
    @Column(nullable = false)
    private boolean isActive;

    public Member(Boolean isActive) {
        this.isActive = isActive;
    }

}
```

ì´ì œ íšŒì› ì—”í‹°í‹°ë¥¼ ì €ì¥í•˜ë©´ `Y`ë˜ëŠ” `N`ìœ¼ë¡œ ì €ì¥ëœë‹¤.  

```text
+-----------+-----------+
|MEMBER_ID  |IS_ACTIVE  |
+-----------+-----------+
| 1         | Y         |
+-----------+-----------+
```

## ê¸€ë¡œë²Œ ì„¤ì •  

ëª¨ë“  `boolean` í•„ë“œê°€ `YN`ìœ¼ë¡œ ì €ì¥ëœë‹¤ê³  í•  ë•Œ ì¼ì¼íˆ `@Convert` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ê¸° ì‹«ë‹¤ë©´ ì „ì—­ ì„¤ì •ì„ í†µí•´ ìë™ìœ¼ë¡œ ì»¨ë²„í„°ê°€ ì ìš©ë˜ê²Œ í•  ìˆ˜ ìˆë‹¤.  

ì»¨í„°ë²„ í´ë˜ìŠ¤ì˜ `@Converter` ì–´ë…¸í…Œì´ì…˜ì˜ `autoApply`ê°’ì„ `true`ë¡œ ì£¼ë©´ ëœë‹¤. ê¸°ë³¸ê°’ì€ `false`ì´ë‹¤.  

```java
@Converter(autoApply = true)    // false(default)
public class BooleanToYNConverter implements AttributeConverter<Boolean, String> {
    ...
}
```

ì´ì œ í•„ë“œì— `@Convert`ë¥¼ ì ìš©í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì»¨ë²„íŒ… ëœë‹¤.  


#### ğŸ“Œ Reference  

- ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë° | ê¹€ì˜í•œ ì €