# 구간 합 (Prefix Sum)  

구간합은 수가 나열된 리스트에서 특정 구간의 합을 의미한다.  

예를 들어 `int[] nums = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}` 라는 배열이 있을 때  

이때 a에서 b까지의 구간 합을 요구하는 쿼리가 들어왔을때  

단순히 다음처럼 a ~ b 사이의 값을 더해가면서 할 수도 있지만 이 경우 시간복잡도는 O(n)이다.  

```java
for (int i = a; i <= b; i++) {
    sum = sum + nums[i];
}
```

위처럼 사용했을 시 특정 구간의 합을 구하는 쿼리가 여러 개 들어온다면? 2중 for문을 사용해야 하기 때문에 상당히 느릴 것이다.  

```java
for (int i = 0; i < n; i++) {
    ...
    for (int j = a; j <= b; j++) {
        sum = sum + nums[j];
    }
    ...
}
```

하지만 구간 합 알고리즘을 사용하면 O(1)의 시간 복잡도를 가지기 때문에 매우 빠른 속도로 처리할 수 있다.  

구간 합은 배열을 하나 추가해 해당 배열에 현재 인덱스 까지의 합을 저장하게 된다.  

`int[] sums = new int[size]`;  

```text
sums[0]은 0번째 까지의 합, sums[1]은 1번째 까지의 합, sums[k]는 k번째 까지의 합을 의미한다.
```

```java
sums[0] = nums[0];
for (int i = 1; i < size; i++) {
    sums[i] = sums[i - 1] + nums[i];
}

for (int sum : sums) {
    System.out.print(sum);
}

// 출력
// 0 1 3 6 10 15 21 28 36 45
```

이 후 a ~ b 사이의 구간합을 구하기 위해서는 `sums[b] - sums[a - 1]`를 사면 nums 배열의 a ~ b 사이의 구간합을 구할 수 있다.  

몇 번의 요청이 들어오든 미리 계산해 놓은 sums 배열을 사용하기 때문에 O(1)의 속도로 끝낼 수 있다.  